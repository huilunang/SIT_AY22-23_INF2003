<!-- This page is the scanner -->
{% extends 'base.html' %} {% block head %}
<title>Scan</title>
<link rel="stylesheet" href="../static/css/scan.css" />
<link rel="stylesheet" href="../static/css/nav.css" />

<script src="https://unpkg.com/html5-qrcode@2.0.9/dist/html5-qrcode.min.js"></script>

{% endblock head %} {% block content %}

<header>
  <div class="containerNav">
    <img src="../static/assets/smart bloobin logo.png" alt="logo" class="logo" />

    <nav>
      <ul>
        <li><a href="home">Home</a></li>
        <li><a href="search">Search</a></li>
        <li><a href="scan" class="active">Scan</a></li>
        <li><a href="rewards">Rewards</a></li>
        <li><a href="location">Location</a></li>
        <li><a href="profile">Profile</a></li>
        <li><a href="{{url_for('logout')}}">Logout</a></li>
      </ul>
    </nav>
  </div>
</header>

<body>
  <div class="row justify-content-center h-100" style="padding: 2vw 3vw; margin: 0">
    <div class="col-md-7 col-lg-7 mainContainer d-flex flex-column justify-content-center align-items-baseline h-100">
      <h1 class="txt1 mb-0" style="font-size: 6vw; line-height: 1;">SCAN TO BEGIN</h1>
      “I don't need you to remember all the good things about me.<br>
      Just remember to Check, Clean and Recycle”
    </div>
    <div class="col-md-5 col-lg-5 scanContainer d-flex flex-column justify-content-center align-items-center h-100"
      style="padding: 2vw 0;">
      <div class="d-flex flex-column justify-content-center text-center h-40">
        <h1 class="txt2 mb-0" style="font-size: 5vw; line-height: 1;">SCAN</h1>
        <h1 class="txt3" style="font-size: 3.3vw; line-height: 1;">QR CODE</h1>
      </div>
      <div id="qr-reader" class="mt-3" style="width: 80%; height: 70%"></div>
      <a id="qr_data"></a>
    </div>
  </div>

  <script>
    const qr_data = document.getElementById("qr_data");

    function onScanSuccess(decodedText, decodedResult) {
      console.log(`Code scanned = ${decodedText}`, decodedResult);
      qr_data.href = decodedText;
      qr_data.classList.add("button-link");
      qr_data.innerHTML = "Next";
    }
    var html5QrcodeScanner = new Html5QrcodeScanner("qr-reader", {
      fps: 10,
      qrbox: 250,
    });
    html5QrcodeScanner.render(onScanSuccess);
  </script>
</body>

</html>
{% endblock %}